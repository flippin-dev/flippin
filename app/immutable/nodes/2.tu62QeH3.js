import{a as te,e as D,o as Y,b as N,c as B,d as T,p as K,h as m,f as O,j as n,k as z,l as y,n as j,m as I,t as be,q as ve,S as mt,y as ge,v as J,x as Se,T as lt,g as oe,U as W,r as at,z as ot,V as R,W as L,X as _t,B as pt,u as Fe,E as bt,Y as vt}from"../chunks/scheduler.BZjK8bPV.js";import{S as se,i as ne,a as q,g as Ve,t as U,c as ze,b as he,d as me,m as _e,e as pe,f as gt}from"../chunks/index.BvlOJt4R.js";import{f as Ie,d as st,g as re,a as De,c as Oe,h as fe,b as x,e as Me,i as P,j as qe,t as Ae,m as Ne,k as nt,n as ye,s as Ce,u as kt,l as yt,o as wt,p as Mt,q as Ge,r as Tt,v as Le,w as ae,x as Be,y as F,z as Re,A as He,B as we,C as Et,G as de,D as ee,E as Te,F as Vt,H as zt,I as Dt,J as We,K as Ee}from"../chunks/duration.CoIopcx0.js";const Bt=(l,{min_size:r=10,max_size:e=100}={min_size:10,max_size:100})=>{const t=()=>{l.parentElement&&It(l,l.parentElement,r,e)},o=new ResizeObserver(t);return o.observe(l==null?void 0:l.parentElement),{destroy(){o.disconnect()}}};function Ht({clientWidth:l,clientHeight:r,scrollWidth:e,scrollHeight:t}){return e>l||t>r}function It(l,r,e,t){let o=e,a=!1,i=e;for(l.style.fontSize=`${i}px`;!a&&o<t;)a=Ht(r),a||(l.style.fontSize=`${o}px`,o++);i=o-2,l.style.fontSize=`${i}px`}function Pe(l){let r,e,t,o,a;return{c(){r=D("div"),e=D("h1"),t=be(l[0]),this.h()},l(i){r=B(i,"DIV",{class:!0});var f=T(r);e=B(f,"H1",{class:!0});var s=T(e);t=ve(s,l[0]),s.forEach(m),f.forEach(m),this.h()},h(){n(e,"class","svelte-2p64qv"),n(r,"class","subtitle-parent svelte-2p64qv")},m(i,f){z(i,r,f),y(r,e),y(e,t),o||(a=mt(Bt.call(null,e,{min_size:18,max_size:34})),o=!0)},p(i,f){f&1&&ge(t,i[0])},d(i){i&&m(r),o=!1,a()}}}function At(l){let r,e,t,o,a,i,f,s,u,c,h,p=l[0],b=Pe(l);return{c(){r=D("header"),e=D("div"),t=Y("svg"),o=Y("path"),a=Y("path"),i=Y("path"),f=Y("path"),s=Y("path"),u=Y("path"),c=Y("path"),h=N(),b.c(),this.h()},l(w){r=B(w,"HEADER",{role:!0,class:!0});var V=T(r);e=B(V,"DIV",{class:!0});var M=T(e);t=K(M,"svg",{viewBox:!0,fill:!0,xmlns:!0,role:!0,"aria-label":!0,class:!0});var k=T(t);o=K(k,"path",{d:!0,stroke:!0}),T(o).forEach(m),a=K(k,"path",{d:!0,stroke:!0}),T(a).forEach(m),i=K(k,"path",{d:!0,stroke:!0}),T(i).forEach(m),f=K(k,"path",{d:!0,stroke:!0}),T(f).forEach(m),s=K(k,"path",{d:!0,stroke:!0}),T(s).forEach(m),u=K(k,"path",{d:!0,stroke:!0}),T(u).forEach(m),c=K(k,"path",{d:!0,stroke:!0}),T(c).forEach(m),k.forEach(m),h=O(M),b.l(M),M.forEach(m),V.forEach(m),this.h()},h(){n(o,"d","M0 0.5 H5 M0.5 0 V5 M1.5 0 V5 M0 2.5 H5"),n(o,"stroke","var(--color-theme-1)"),n(a,"d","M6.5 0 V5 M7.5 0 V5 M6 4.5 H11"),n(a,"stroke","var(--color-theme-2)"),n(i,"d","M12 0.5 H17 M13.5 0 V5 M14.5 0 V5 M12 4.5 H17"),n(i,"stroke","var(--color-theme-3)"),n(f,"d","M18 0.5 H23 M18.5 0 V5 M19.5 0 V5 M22.5 0 V3 M18 2.5 H23"),n(f,"stroke","var(--color-theme-1)"),n(s,"d","M24 0.5 H29 M24.5 0 V5 M27.5 0 V3 M28.5 0 V3 M24 2.5 H29"),n(s,"stroke","var(--color-theme-2)"),n(u,"d","M30 0.5 H35 M32.5 0 V5 M33.5 0 V5 M30 4.5 H35"),n(u,"stroke","var(--color-theme-3)"),n(c,"d","M36.5 0 V5 M39.5 0 V5 M40.5 0 V5 M37 1.5 H38 M38 2.5 H39"),n(c,"stroke","var(--color-theme-1)"),n(t,"viewBox","0 0 41 5"),n(t,"fill","none"),n(t,"xmlns","http://www.w3.org/2000/svg"),n(t,"role","img"),n(t,"aria-label","Flippin logo"),n(t,"class","svelte-2p64qv"),n(e,"class","title-container svelte-2p64qv"),n(r,"role","banner"),n(r,"class","title")},m(w,V){z(w,r,V),y(r,e),y(e,t),y(t,o),y(t,a),y(t,i),y(t,f),y(t,s),y(t,u),y(t,c),y(e,h),b.m(e,null)},p(w,[V]){V&1&&te(p,p=w[0])?(b.d(1),b=Pe(w),b.c(),b.m(e,null)):b.p(w,V)},i:j,o:j,d(w){w&&m(r),b.d(w)}}}function Ct(l,r,e){let t,o,a,i,f;I(l,Ie,u=>e(1,o=u)),I(l,st,u=>e(2,a=u)),I(l,re,u=>e(3,i=u)),I(l,De,u=>e(4,f=u));function s(u){return u.startsWith(Oe)?u.substring(Oe.length):u}return l.$$.update=()=>{l.$$.dirty&30&&e(0,t=f==="daily"?`#${i}: ${a}`:s(o.title))},[t,o,a,i,f]}class Lt extends se{constructor(r){super(),ne(this,r,Ct,At,te,{})}}function St(l){let r=l[2].format(Ae)+"",e;return{c(){e=be(r)},l(t){e=ve(t,r)},m(t,o){z(t,e,o)},p(t,o){o&4&&r!==(r=t[2].format(Ae)+"")&&ge(e,r)},d(t){t&&m(e)}}}function Ft(l){let r;return{c(){r=be(l[0])},l(e){r=ve(e,l[0])},m(e,t){z(e,r,t)},p(e,t){t&1&&ge(r,e[0])},d(e){e&&m(r)}}}function qt(l){let r;function e(a,i){return a[1]&&a[0]?Ft:St}let t=e(l),o=t(l);return{c(){o.c(),r=J()},l(a){o.l(a),r=J()},m(a,i){o.m(a,i),z(a,r,i)},p(a,[i]){t===(t=e(a))&&o?o.p(a,i):(o.d(1),o=t(a),o&&(o.c(),o.m(r.parentNode,r)))},i:j,o:j,d(a){a&&m(r),o.d(a)}}}function Nt(l,r,e){let t,o,a,i;I(l,fe,h=>e(5,o=h)),I(l,x,h=>e(6,a=h)),I(l,Me,h=>e(7,i=h));let{interval:f}=r,{message:s}=r,u,c=!1;return Se(()=>{e(4,u=setInterval(()=>{i===null&&(x.update(h=>h+1e3),a>=f*1e3&&(clearInterval(u),e(1,c=!0)))},1e3))}),P.extend(qe),lt(()=>{clearInterval(u)}),l.$$set=h=>{"interval"in h&&e(3,f=h.interval),"message"in h&&e(0,s=h.message)},l.$$.update=()=>{l.$$.dirty&64&&e(2,t=P.duration(a)),l.$$.dirty&48&&o&&clearInterval(u)},[s,c,t,f,u,o,a]}class Ot extends se{constructor(r){super(),ne(this,r,Nt,qt,te,{interval:3,message:0})}}function Ue(l){let r,e;return r=new Ot({props:{interval:Ne,message:nt}}),{c(){he(r.$$.fragment)},l(t){me(r.$$.fragment,t)},m(t,o){_e(r,t,o),e=!0},i(t){e||(q(r.$$.fragment,t),e=!0)},o(t){U(r.$$.fragment,t),e=!1},d(t){pe(r,t)}}}function Gt(l){let r,e,t='<svg aria-hidden="true" viewBox="-2 -2 12 17" fill="none" stroke="var(--color-text)" xmlns="http://www.w3.org/2000/svg" width="90%" height="90%"><path d="M0.5 4.5 A3.5 3.5 0 1 1 4 8 V9" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="4" cy="12" r="0.75" stroke-width="1.5"></circle></svg>',o,a,i=`<svg aria-hidden="true" viewBox="-3 -3 6 6" fill="none" stroke="var(--color-text)" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg" width="90%" height="90%"><circle cx="0" cy="0" r="1"></circle><path d="
                M1.4979407787322998 -0.07850953936576843 L1.9972550868988037 -0.10466885566711426
                M0.38822856545448303 -1.4488887786865234 L0.517638087272644 -1.9318516254425049 
                M-1.2580000162124634 -0.8169616460800171 L-1.6773391962051392 -1.089273452758789
                M-1.165722131729126 0.94398432970047 L-1.5542904138565063 1.2586369514465332
                M0.5375528335571289 1.400375485420227 L0.7167364358901978 1.867156744003296
            "></path></svg>`,f,s,u,c,h='<svg aria-hidden="true" viewBox="-0.6 -0.5 6 6" fill="none" stroke="var(--color-text)" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg" width="90%" height="90%"><path d="M1 2 V4 M2.5 1 V4 M4 3 V4"></path></svg>',p,b,w,V,M,k,S,A,E=l[0]==="daily"&&Ue();return{c(){r=D("div"),e=D("button"),e.innerHTML=t,o=N(),a=D("button"),a.innerHTML=i,f=N(),s=D("div"),E&&E.c(),u=N(),c=D("button"),c.innerHTML=h,p=N(),b=D("button"),w=Y("svg"),V=Y("path"),this.h()},l(g){r=B(g,"DIV",{"data-toolbar-size":!0,role:!0,"aria-controls":!0,"aria-label":!0,class:!0});var d=T(r);e=B(d,"BUTTON",{title:!0,"data-toolbar-pos":!0,class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-mw9vy7"&&(e.innerHTML=t),o=O(d),a=B(d,"BUTTON",{title:!0,"data-toolbar-pos":!0,class:!0,"data-svelte-h":!0}),oe(a)!=="svelte-1dkmrrv"&&(a.innerHTML=i),f=O(d),s=B(d,"DIV",{role:!0,"aria-label":!0,class:!0});var v=T(s);E&&E.l(v),v.forEach(m),u=O(d),c=B(d,"BUTTON",{title:!0,"data-toolbar-pos":!0,class:!0,"data-svelte-h":!0}),oe(c)!=="svelte-wr6plk"&&(c.innerHTML=h),p=O(d),b=B(d,"BUTTON",{title:!0,"data-toolbar-pos":!0,"aria-disabled":!0,class:!0});var H=T(b);w=K(H,"svg",{"aria-hidden":!0,viewBox:!0,fill:!0,stroke:!0,"stroke-linecap":!0,xmlns:!0});var Q=T(w);V=K(Q,"path",{d:!0}),T(V).forEach(m),Q.forEach(m),H.forEach(m),d.forEach(m),this.h()},h(){n(e,"title","How to play"),n(e,"data-toolbar-pos","0"),n(e,"class","svelte-1y5nl4x"),n(a,"title","Settings"),n(a,"data-toolbar-pos","1"),n(a,"class","svelte-1y5nl4x"),n(s,"role","timer"),n(s,"aria-label","game timer"),n(s,"class","timer-container svelte-1y5nl4x"),n(c,"title","Stats"),n(c,"data-toolbar-pos","2"),n(c,"class","svelte-1y5nl4x"),n(V,"d",`
                M-1.4142135381698608 -1.4142135381698608 
                A1.999999965771458 1.999999965771458 0 1 1 -1.4999996423721313 0.4999951720237732
                M-1.4142135381698608 -1.4142135381698608 L-0.4142089784145355 -1.4142135381698608
                M-1.4142135381698608 -1.4142135381698608 L-1.4142135381698608 -2.414217948913574
            `),n(w,"aria-hidden","true"),n(w,"viewBox","-3.75 -3.5 8 6.25"),n(w,"fill","none"),n(w,"stroke","var(--color-text)"),n(w,"stroke-linecap","round"),n(w,"xmlns","http://www.w3.org/2000/svg"),n(b,"title","Reset the board"),n(b,"data-toolbar-pos","3"),b.disabled=l[2],n(b,"aria-disabled",l[2]),n(b,"class","svelte-1y5nl4x"),n(r,"data-toolbar-size",M=l[2]?3:4),n(r,"role","toolbar"),n(r,"aria-controls","game-board"),n(r,"aria-label","game controls"),n(r,"class","controls svelte-1y5nl4x")},m(g,d){z(g,r,d),y(r,e),y(r,o),y(r,a),y(r,f),y(r,s),E&&E.m(s,null),y(r,u),y(r,c),y(r,p),y(r,b),y(b,w),y(w,V),l[12](r),k=!0,S||(A=[W(e,"click",l[4]),W(e,"keydown",l[5]),W(a,"click",l[6]),W(a,"keydown",l[7]),W(c,"click",l[8]),W(c,"keydown",l[9]),W(b,"click",l[10]),W(b,"keydown",l[11])],S=!0)},p(g,[d]){g[0]==="daily"?E?d&1&&q(E,1):(E=Ue(),E.c(),q(E,1),E.m(s,null)):E&&(Ve(),U(E,1,1,()=>{E=null}),ze()),(!k||d&4)&&(b.disabled=g[2]),(!k||d&4)&&n(b,"aria-disabled",g[2]),(!k||d&4&&M!==(M=g[2]?3:4))&&n(r,"data-toolbar-size",M)},i(g){k||(q(E),k=!0)},o(g){U(E),k=!1},d(g){g&&m(r),E&&E.d(),l[12](null),S=!1,at(A)}}}function Rt(l,r,e){let t,o,a;I(l,De,M=>e(0,o=M)),I(l,fe,M=>e(3,a=M));let i;const f=()=>Me.set("tutorial"),s=M=>ye(M,i),u=()=>Me.set("settings"),c=M=>ye(M,i),h=()=>Me.set("stats"),p=M=>ye(M,i),b=()=>{t||Ce.set(!0)},w=M=>ye(M,i);function V(M){ot[M?"unshift":"push"](()=>{i=M,e(1,i)})}return l.$$.update=()=>{l.$$.dirty&9&&e(2,t=a&&o==="daily")},[o,i,t,a,f,s,u,c,h,p,b,w,V]}class Wt extends se{constructor(r){super(),ne(this,r,Rt,Gt,te,{})}}function Pt(l){let r=l[2].format(Ge)+"",e;return{c(){e=be(r)},l(t){e=ve(t,r)},m(t,o){z(t,e,o)},p(t,o){o&4&&r!==(r=t[2].format(Ge)+"")&&ge(e,r)},d(t){t&&m(e)}}}function Ut(l){let r,e;return{c(){r=D("a"),e=be(l[0]),this.h()},l(t){r=B(t,"A",{"data-sveltekit-reload":!0,href:!0});var o=T(r);e=ve(o,l[0]),o.forEach(m),this.h()},h(){n(r,"data-sveltekit-reload",""),n(r,"href","/")},m(t,o){z(t,r,o),y(r,e)},p(t,o){o&1&&ge(e,t[0])},d(t){t&&m(r)}}}function jt(l){let r;function e(a,i){return a[1]&&a[0]?Ut:Pt}let t=e(l),o=t(l);return{c(){o.c(),r=J()},l(a){o.l(a),r=J()},m(a,i){o.m(a,i),z(a,r,i)},p(a,[i]){t===(t=e(a))&&o?o.p(a,i):(o.d(1),o=t(a),o&&(o.c(),o.m(r.parentNode,r)))},i:j,o:j,d(a){a&&m(r),o.d(a)}}}function Xt(l,r,e){let t,{message:o}=r;P.extend(kt),P.extend(yt),P.tz.setDefault(wt);let a,i=!1;const f=P.tz().endOf("d");let s=f.diff(P.tz());return P.extend(qe),Se(()=>{if(s<=0||R(re)<Mt()){e(1,i=!0);return}a=setInterval(()=>{e(3,s=f.diff(P.tz())),s<=0&&e(1,i=!0)},1e3)}),lt(()=>{clearInterval(a)}),l.$$set=u=>{"message"in u&&e(0,o=u.message)},l.$$.update=()=>{l.$$.dirty&8&&e(2,t=P.duration(s))},[o,i,t,s]}class Yt extends se{constructor(r){super(),ne(this,r,Xt,jt,te,{message:0})}}function je(l){let r,e="Share",t,o;return{c(){r=D("button"),r.textContent=e,this.h()},l(a){r=B(a,"BUTTON",{title:!0,"aria-label":!0,class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-omeyes"&&(r.textContent=e),this.h()},h(){n(r,"title","Copy results to clipboard"),n(r,"aria-label","copy game results to clipboard"),n(r,"class","svelte-v24ap7")},m(a,i){z(a,r,i),t||(o=W(r,"click",l[2]),t=!0)},p:j,d(a){a&&m(r),t=!1,o()}}}function Kt(l){let r,e,t="<strong>Congratulations!</strong>",o,a,i,f,s;i=new Yt({props:{message:Tt}});let u=l[1]==="daily"&&je(l);return{c(){r=D("div"),e=D("div"),e.innerHTML=t,o=N(),a=D("div"),he(i.$$.fragment),f=N(),u&&u.c(),this.h()},l(c){r=B(c,"DIV",{role:!0,"aria-label":!0,class:!0});var h=T(r);e=B(h,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1bvq731"&&(e.innerHTML=t),o=O(h),a=B(h,"DIV",{role:!0,"aria-label":!0,class:!0});var p=T(a);me(i.$$.fragment,p),p.forEach(m),f=O(h),u&&u.l(h),h.forEach(m),this.h()},h(){n(e,"role","presentation"),n(e,"class","congratulations svelte-v24ap7"),n(a,"role","timer"),n(a,"aria-label","countdown to next daily puzzle"),n(a,"class","countdown-container svelte-v24ap7"),n(r,"role","region"),n(r,"aria-label","post-game info"),n(r,"class","game-over-block svelte-v24ap7"),L(r,"reduced-motion",l[0])},m(c,h){z(c,r,h),y(r,e),y(r,o),y(r,a),_e(i,a,null),y(r,f),u&&u.m(r,null),s=!0},p(c,[h]){c[1]==="daily"?u?u.p(c,h):(u=je(c),u.c(),u.m(r,null)):u&&(u.d(1),u=null),(!s||h&1)&&L(r,"reduced-motion",c[0])},i(c){s||(q(i.$$.fragment,c),s=!0)},o(c){U(i.$$.fragment,c),s=!1},d(c){c&&m(r),pe(i),u&&u.d()}}}function Jt(l,r,e){let t,o;I(l,Le,f=>e(0,t=f)),I(l,De,f=>e(1,o=f)),P.extend(qe);function a(){const f=R(x);return f/1e3>=Ne?-1:f}function i(){const f=`I beat Flippin #${R(re)}: ${R(st)}`,s=a(),u=s>0?P.duration(s).format(Ae):nt,c=R(ae).curBoard;if(c===null){Be("Could not find board image",{theme:{"--toastBackground":"var(--error-color)"}});return}let h="";for(let b=0;b<c.length;b++)b%F===0&&b!==0&&(h+=`
`),h+=c[b]==="0"?"🟥":c[b]==="1"?"🟩":"🟦";let p=`${f}
Time: ${u}
${h}`;navigator.clipboard.writeText(p).then(()=>Be("Results copied to clipboard"),()=>Be("Could not complete action",{theme:{"--toastBackground":"var(--error-color)"}}))}return[t,o,i]}class Zt extends se{constructor(r){super(),ne(this,r,Jt,Kt,te,{})}}function Xe(l,r,e){const t=l.slice();return t[30]=r[e],t}function Ye(l,r,e){var u;const t=l.slice();t[33]=r[e];const o=(u=t[3].current[t[30]])==null?void 0:u[t[33]];t[34]=o;const a=t[34]===0;t[35]=a;const i=t[34]===1;t[36]=i;const f=t[34]===2;t[37]=f;const s=t[8](t[30],t[33]);return t[38]=s,t}function Ke(l,r,e){const t=l.slice();return t[30]=r[e],t}function Je(l,r,e){var f,s,u;const t=l.slice();t[33]=r[e];const o=((f=t[3].end[t[30]])==null?void 0:f[t[33]])===0;t[35]=o;const a=((s=t[3].end[t[30]])==null?void 0:s[t[33]])===1;t[36]=a;const i=((u=t[3].end[t[30]])==null?void 0:u[t[33]])===2;return t[37]=i,t}function Qt(l){let r,e,t,o,a=[],i=new Map,f,s,u,c,h,p=[],b=new Map,w,V,M;r=new Lt({});let k=ee(Array.from(Array(F).keys()));const S=d=>d[30];for(let d=0;d<k.length;d+=1){let v=Ke(l,k,d),H=S(v);i.set(H,a[d]=Qe(H,v))}s=new Wt({});let A=ee(Array.from(Array(F).keys()));const E=d=>d[30];for(let d=0;d<A.length;d+=1){let v=Xe(l,A,d),H=E(v);b.set(H,p[d]=et(H,v))}let g=(l[5]&&l[2]==="daily"||l[7]&&l[2]==="freeplay")&&tt();return{c(){he(r.$$.fragment),e=N(),t=D("div"),o=D("div");for(let d=0;d<a.length;d+=1)a[d].c();f=N(),he(s.$$.fragment),u=N(),c=D("div"),h=D("div");for(let d=0;d<p.length;d+=1)p[d].c();w=N(),V=D("div"),g&&g.c(),this.h()},l(d){me(r.$$.fragment,d),e=O(d),t=B(d,"DIV",{role:!0,"aria-label":!0,class:!0});var v=T(t);o=B(v,"DIV",{role:!0,class:!0,"aria-label":!0});var H=T(o);for(let G=0;G<a.length;G+=1)a[G].l(H);H.forEach(m),v.forEach(m),f=O(d),me(s.$$.fragment,d),u=O(d),c=B(d,"DIV",{role:!0,"aria-label":!0,"aria-live":!0,class:!0});var Q=T(c);h=B(Q,"DIV",{"data-table-rows":!0,"data-table-cols":!0,class:!0,id:!0,role:!0,"aria-label":!0});var le=T(h);for(let G=0;G<p.length;G+=1)p[G].l(le);le.forEach(m),Q.forEach(m),w=O(d),V=B(d,"DIV",{class:!0,"aria-live":!0});var ke=T(V);g&&g.l(ke),ke.forEach(m),this.h()},h(){n(o,"role","table"),n(o,"class","board reference-board svelte-ddfrhh"),n(o,"aria-label","reference game board"),n(t,"role","region"),n(t,"aria-label","end state of game board"),n(t,"class","region-container svelte-ddfrhh"),n(h,"data-table-rows",F),n(h,"data-table-cols",F),n(h,"class","board game-board"),n(h,"id","game-board"),n(h,"role","grid"),n(h,"aria-label","game board"),n(c,"role","region"),n(c,"aria-label","playing area"),n(c,"aria-live","off"),n(c,"class","region-container svelte-ddfrhh"),n(V,"class","region-container svelte-ddfrhh"),n(V,"aria-live","polite")},m(d,v){_e(r,d,v),z(d,e,v),z(d,t,v),y(t,o);for(let H=0;H<a.length;H+=1)a[H]&&a[H].m(o,null);z(d,f,v),_e(s,d,v),z(d,u,v),z(d,c,v),y(c,h);for(let H=0;H<p.length;H+=1)p[H]&&p[H].m(h,null);l[22](h),z(d,w,v),z(d,V,v),g&&g.m(V,null),M=!0},p(d,v){v[0]&8&&(k=ee(Array.from(Array(F).keys())),a=Te(a,v,S,1,d,k,i,o,Ee,Qe,null,Ke)),v[0]&1534&&(A=ee(Array.from(Array(F).keys())),p=Te(p,v,E,1,d,A,b,h,Ee,et,null,Xe)),d[5]&&d[2]==="daily"||d[7]&&d[2]==="freeplay"?g?v[0]&164&&q(g,1):(g=tt(),g.c(),q(g,1),g.m(V,null)):g&&(Ve(),U(g,1,1,()=>{g=null}),ze())},i(d){M||(q(r.$$.fragment,d),q(s.$$.fragment,d),q(g),M=!0)},o(d){U(r.$$.fragment,d),U(s.$$.fragment,d),U(g),M=!1},d(d){d&&(m(e),m(t),m(f),m(u),m(c),m(w),m(V)),pe(r,d);for(let v=0;v<a.length;v+=1)a[v].d();pe(s,d);for(let v=0;v<p.length;v+=1)p[v].d();l[22](null),g&&g.d()}}}function $t(l){let r,e="<p>Loading...</p>";return{c(){r=D("div"),r.innerHTML=e,this.h()},l(t){r=B(t,"DIV",{class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-kqmxoz"&&(r.innerHTML=e),this.h()},h(){n(r,"class","loading")},m(t,o){z(t,r,o)},p:j,i:j,o:j,d(t){t&&m(r)}}}function Ze(l,r){let e,t;return{key:l,first:null,c(){e=D("div"),this.h()},l(o){e=B(o,"DIV",{class:!0,role:!0,"aria-label":!0}),T(e).forEach(m),this.h()},h(){n(e,"class","tile"),n(e,"role","cell"),n(e,"aria-label",t=`${r[35]===!0?"color 1":r[36]===!0?"color 2":"color 3"}`),L(e,"color1",r[35]),L(e,"color2",r[36]),L(e,"color3",r[37]),this.first=e},m(o,a){z(o,e,a)},p(o,a){r=o,a[0]&8&&t!==(t=`${r[35]===!0?"color 1":r[36]===!0?"color 2":"color 3"}`)&&n(e,"aria-label",t),a[0]&8&&L(e,"color1",r[35]),a[0]&8&&L(e,"color2",r[36]),a[0]&8&&L(e,"color3",r[37])},d(o){o&&m(e)}}}function Qe(l,r){let e,t=[],o=new Map,a,i=ee(Array.from(Array(F).keys()));const f=s=>s[33];for(let s=0;s<i.length;s+=1){let u=Je(r,i,s),c=f(u);o.set(c,t[s]=Ze(c,u))}return{key:l,first:null,c(){e=D("div");for(let s=0;s<t.length;s+=1)t[s].c();a=N(),this.h()},l(s){e=B(s,"DIV",{role:!0,class:!0});var u=T(e);for(let c=0;c<t.length;c+=1)t[c].l(u);a=O(u),u.forEach(m),this.h()},h(){n(e,"role","row"),n(e,"class","row"),Fe(e,"--numColumns",F),this.first=e},m(s,u){z(s,e,u);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);y(e,a)},p(s,u){r=s,u[0]&8&&(i=ee(Array.from(Array(F).keys())),t=Te(t,u,f,1,r,i,o,e,Ee,Ze,a,Je))},d(s){s&&m(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function $e(l){let r,e,t,o,a,i,f,s;function u(){return l[19](l[30],l[33])}function c(){return l[20](l[30],l[33])}return{c(){r=D("div"),e=D("button"),this.h()},l(h){r=B(h,"DIV",{class:!0});var p=T(r);e=B(p,"BUTTON",{"data-table-row":!0,"data-table-col":!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-disabled":!0,class:!0}),T(e).forEach(m),p.forEach(m),this.h()},h(){n(e,"data-table-row",l[30]),n(e,"data-table-col",l[33]),n(e,"data-testid","row"+l[30]+"-col"+l[33]),n(e,"role","gridcell"),n(e,"aria-label",t=`${l[35]===!0?"color 1":l[36]===!0?"color 2":"color 3"}`),e.disabled=o=l[5]&&l[2]==="daily"||l[7]&&l[2]==="freeplay",n(e,"aria-disabled",a=l[5]&&l[2]==="daily"||l[7]&&l[2]==="freeplay"),n(e,"class","svelte-ddfrhh"),L(e,"color1",l[35]),L(e,"color2",l[36]),L(e,"color3",l[37]),L(e,"reduced-motion",l[6]),L(e,"won",l[5]&&l[2]==="daily"||l[7]&&l[2]==="freeplay"),Fe(e,"--animationDelay",`${(l[38]?0:rt)+100*(l[33]+l[30]*(F-1))}ms`),n(r,"class","tile svelte-ddfrhh")},m(h,p){z(h,r,p),y(r,e),f||(s=[W(e,"click",u),W(e,"touchstart",vt(c)),W(e,"keydown",l[21])],f=!0)},p(h,p){l=h,p[0]&8&&t!==(t=`${l[35]===!0?"color 1":l[36]===!0?"color 2":"color 3"}`)&&n(e,"aria-label",t),p[0]&164&&o!==(o=l[5]&&l[2]==="daily"||l[7]&&l[2]==="freeplay")&&(e.disabled=o),p[0]&164&&a!==(a=l[5]&&l[2]==="daily"||l[7]&&l[2]==="freeplay")&&n(e,"aria-disabled",a),p[0]&8&&L(e,"color1",l[35]),p[0]&8&&L(e,"color2",l[36]),p[0]&8&&L(e,"color3",l[37]),p[0]&64&&L(e,"reduced-motion",l[6]),p[0]&164&&L(e,"won",l[5]&&l[2]==="daily"||l[7]&&l[2]==="freeplay")},i(h){h&&(i||bt(()=>{i=gt(e,l[9],{duration:rt,direction:l[38],label:l[34]}),i.start()}))},o:j,d(h){h&&m(r),f=!1,at(s)}}}function xe(l,r){let e,t=r[4],o,a=$e(r);return{key:l,first:null,c(){e=J(),a.c(),o=J(),this.h()},l(i){e=J(),a.l(i),o=J(),this.h()},h(){this.first=e},m(i,f){z(i,e,f),a.m(i,f),z(i,o,f)},p(i,f){r=i,f[0]&16&&te(t,t=r[4])?(Ve(),U(a,1,1,j),ze(),a=$e(r),a.c(),q(a,1),a.m(o.parentNode,o)):a.p(r,f)},d(i){i&&(m(e),m(o)),a.d(i)}}}function et(l,r){let e,t=[],o=new Map,a,i=ee(Array.from(Array(F).keys()));const f=s=>s[33];for(let s=0;s<i.length;s+=1){let u=Ye(r,i,s),c=f(u);o.set(c,t[s]=xe(c,u))}return{key:l,first:null,c(){e=D("div");for(let s=0;s<t.length;s+=1)t[s].c();a=N(),this.h()},l(s){e=B(s,"DIV",{role:!0,class:!0});var u=T(e);for(let c=0;c<t.length;c+=1)t[c].l(u);a=O(u),u.forEach(m),this.h()},h(){n(e,"role","row"),n(e,"class","row"),Fe(e,"--numColumns",F),this.first=e},m(s,u){z(s,e,u);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);y(e,a)},p(s,u){r=s,u[0]&1534&&(i=ee(Array.from(Array(F).keys())),t=Te(t,u,f,1,r,i,o,e,Ee,xe,a,Ye))},d(s){s&&m(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function tt(l){let r,e;return r=new Zt({}),{c(){he(r.$$.fragment)},l(t){me(r.$$.fragment,t)},m(t,o){_e(r,t,o),e=!0},i(t){e||(q(r.$$.fragment,t),e=!0)},o(t){U(r.$$.fragment,t),e=!1},d(t){pe(r,t)}}}function xt(l){let r,e,t,o,a,i;const f=[$t,Qt],s=[];function u(c,h){return c[0]?1:0}return t=u(l),o=s[t]=f[t](l),{c(){r=D("meta"),e=N(),o.c(),a=J(),this.h()},l(c){const h=_t("svelte-1tmfi4l",document.head);r=B(h,"META",{name:!0,content:!0}),h.forEach(m),e=O(c),o.l(c),a=J(),this.h()},h(){document.title="Flippin",n(r,"name","description"),n(r,"content","A tile flipping game written in SvelteKit")},m(c,h){y(document.head,r),z(c,e,h),s[t].m(c,h),z(c,a,h),i=!0},p(c,h){let p=t;t=u(c),t===p?s[t].p(c,h):(Ve(),U(s[p],1,1,()=>{s[p]=null}),ze(),o=s[t],o?o.p(c,h):(o=s[t]=f[t](c),o.c()),q(o,1),o.m(a.parentNode,a))},i(c){i||(q(o),i=!0)},o(c){U(o),i=!1},d(c){c&&(m(e),m(a)),m(r),s[t].d(c)}}}const rt=1e3;function er(l,r,e){let t,o,a,i,f,s,u,c,h,p,b,w;I(l,De,_=>e(2,a=_)),I(l,Ie,_=>e(25,i=_)),I(l,x,_=>e(14,f=_)),I(l,Re,_=>e(15,s=_)),I(l,Ce,_=>e(16,u=_)),I(l,fe,_=>e(5,c=_)),I(l,He,_=>e(17,h=_)),I(l,ae,_=>e(18,p=_)),I(l,Le,_=>e(6,b=_)),I(l,we,_=>e(7,w=_));function V(_,C){return S>=0&&A>=0?_===S-1&&C===A?"up":_===S&&C===A+1?"right":_===S+1&&C===A?"down":_===S&&C===A-1?"left":null:null}function M(_,C){const{duration:X,direction:Z,label:$}=C;if(R(Le)||!Z)return{duration:0,css:()=>""};const ie=`var(--color-theme-${$===0?3:$})`,ft=`var(--color-theme-${$+1})`;return{duration:X,css:ht=>{const ue=Vt(ht);let ce="";switch(Z){case"right":ce=`rotateY(${360*ue}deg)`;break;case"left":ce=`rotateY(${-360*ue}deg)`;break;case"up":ce=`rotateX(${360*ue}deg)`;break;case"down":ce=`rotateX(${-360*ue}deg)`;break}return`
					transform: ${ce};
					background: ${ue<.75?ie:ft}`}}}let k,S=-1,A=-1,E=!1,g=!1,d=!0;function v(){if(t||ae.set(zt),o||He.set(Dt),(t==null?void 0:t.lastGame)===R(re)){x.set((t==null?void 0:t.curTime)??0);const _=(t==null?void 0:t.curBoard)??"";e(3,k=new de(_))}else e(3,k=new de),x.set(0),ae.update(()=>({curTime:0,curBoard:k.serializeCurrent(),lastGame:R(re)}));e(13,d=!0),fe.set(H(k.current,k.end))}Se(()=>{v(),e(0,g=!0)});const H=(_,C)=>_.length===C.length&&_.every((X,Z)=>X.length===C[Z].length&&X.every(($,ie)=>$===C[Z][ie]));function Q(){d&&g&&ae.update(()=>({curTime:R(x),curBoard:k.serializeCurrent(),lastGame:R(re)}))}function le(_,C){c&&a==="daily"||(k.update(_,C),e(11,S=_),e(12,A=C),e(4,E=!E),Q(),H(k.current,k.end)&&(d?(fe.set(!0),He.update(X=>{const Z=R(x)/1e3,$=X.distribution,ie=Math.min(Math.floor(Z/60),Ne/60);return $[ie]+=1,{wonGames:X.wonGames+1,fastestGame:!X.fastestGame||Z<X.fastestGame?Z:X.fastestGame,distribution:$}})):we.set(!0)))}function ke(_){_==="daily"&&!d?(e(11,S=-1),e(12,A=-1),e(4,E=!E),v()):a==="freeplay"&&d&&(we.set(!1),e(3,k=new de("",i??We)),e(13,d=!1))}let G;const it=(_,C)=>le(_,C),ut=(_,C)=>le(_,C),ct=_=>Et(_,G);function dt(_){ot[_?"unshift":"push"](()=>{G=_,e(1,G)})}return l.$$.update=()=>{l.$$.dirty[0]&262144&&(t=p),l.$$.dirty[0]&131072&&(o=h),l.$$.dirty[0]&73728&&u&&(Ce.set(!1),d?e(3,k=new de):(we.set(!1),e(3,k=new de("",R(Ie)??We))),e(11,S=-1),e(12,A=-1),Q()),l.$$.dirty[0]&38914&&s&&(async()=>{var _;await pt(),Re.set(!1),(_=G.querySelector(`[data-table-row="${S}"][data-table-col="${A}"]`))==null||_.focus()})(),l.$$.dirty[0]&24577&&d&&g&&ae.update(_=>({curTime:f,curBoard:_.curBoard,lastGame:R(re)})),l.$$.dirty[0]&4&&ke(a)},[g,G,a,k,E,c,b,w,V,M,le,S,A,d,f,s,u,h,p,it,ut,ct,dt]}class ar extends se{constructor(r){super(),ne(this,r,er,xt,te,{},null,[-1,-1])}}export{ar as component};
